import{c as F,ab as I,a9 as _,t as k,r as u,j as e,aa as E,s as c,B as g,E as y,L as z}from"./index-DddjZrTs.js";import{u as A,g as V,h as D,F as a,a as t,b as o,c as n,d as i,o as q,s as l,_ as M}from"./form-CbInO8rD.js";import{C as R,b as T,c as U,d as B,a as H}from"./card-HJdulpyU.js";import{S as O,a as Z,b as J,c as G,d as K}from"./select-DBKdREnk.js";import{P as Q}from"./phone-input-8ZXvP57c.js";import{E as N}from"./eye-off-CDbHwmOe.js";import"./label-BzSdYhZy.js";import"./index-B6Fl2CXf.js";import"./index-BJRV2Ale.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=F("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),X=q({firstName:l().min(2,"Le prénom doit contenir au moins 2 caractères"),lastName:l().min(2,"Le nom doit contenir au moins 2 caractères"),email:l().email("Adresse email invalide"),password:l().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:l(),role:M(["initiator","approver_level_1","approver_level_2","director"]),department:l().min(1,"Le département est requis"),zone:l().min(1,"La zone est requise"),employeeId:l().min(1,"Le numéro d'employé est requis"),phone:l().optional()}).refine(m=>m.password===m.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]});function le(){const{register:m,isAuthenticated:b}=I(),{toast:x}=_(),w=k(),[f,v]=u.useState(!1),[p,C]=u.useState(!1),[h,P]=u.useState(!1),r=A({resolver:V(X),defaultValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"initiator",department:"",zone:"",employeeId:"",phone:""}});if(b)return e.jsx(E,{to:"/dashboard",replace:!0});const S=async s=>{v(!0);try{const{confirmPassword:d,...j}=s;await m(j)?(x({title:"Compte créé avec succès",description:"Vous êtes maintenant connecté."}),w("/dashboard")):x({title:"Échec de la création du compte",description:"Cette adresse email est déjà utilisée.",variant:"destructive"})}catch{x({title:"Erreur",description:"Une erreur est survenue lors de la création du compte.",variant:"destructive"})}finally{v(!1)}},L={initiator:"Initiateur",approver_level_1:"Approbateur Niveau 1",approver_level_2:"Approbateur Niveau 2",director:"Directeur"};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4",children:e.jsxs(R,{className:"w-full max-w-2xl shadow-xl border-primary/10",children:[e.jsxs(T,{className:"space-y-1 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full bg-primary/10",children:e.jsx(W,{className:"w-6 h-6 text-primary"})}),e.jsx(U,{className:"text-2xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Créer un compte"}),e.jsx(B,{children:"Remplissez les informations ci-dessous pour créer votre compte"})]}),e.jsxs(H,{children:[e.jsx(D,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(S),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"firstName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Prénom"}),e.jsx(n,{children:e.jsx(c,{placeholder:"Jean",...s})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"lastName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Nom"}),e.jsx(n,{children:e.jsx(c,{placeholder:"Dupont",...s})}),e.jsx(i,{})]})})]}),e.jsx(a,{control:r.control,name:"email",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Email"}),e.jsx(n,{children:e.jsx(c,{type:"email",placeholder:"jean.dupont@entreprise.com",...s})}),e.jsx(i,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"password",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Mot de passe"}),e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(c,{type:p?"text":"password",placeholder:"••••••••",...s}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>C(!p),children:p?e.jsx(N,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})})]})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"confirmPassword",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Confirmer le mot de passe"}),e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(c,{type:h?"text":"password",placeholder:"••••••••",...s}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>P(!h),children:h?e.jsx(N,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})})]})}),e.jsx(i,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"role",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Rôle"}),e.jsxs(O,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(n,{children:e.jsx(Z,{children:e.jsx(J,{placeholder:"Sélectionner un rôle"})})}),e.jsx(G,{children:Object.entries(L).map(([d,j])=>e.jsx(K,{value:d,children:j},d))})]}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"employeeId",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Numéro d'employé"}),e.jsx(n,{children:e.jsx(c,{placeholder:"EMP001",...s})}),e.jsx(i,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{control:r.control,name:"department",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Département"}),e.jsx(n,{children:e.jsx(c,{placeholder:"Production",...s})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"zone",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Zone"}),e.jsx(n,{children:e.jsx(c,{placeholder:"Zone A",...s})}),e.jsx(i,{})]})})]}),e.jsx(a,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Téléphone (optionnel)"}),e.jsx(n,{children:e.jsx(Q,{value:s.value||"",onChange:d=>s.onChange(d||""),placeholder:"Numéro de téléphone"})}),e.jsx(i,{})]})}),e.jsx(g,{type:"submit",className:"w-full",disabled:f,children:f?"Création du compte...":"Créer le compte"})]})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:["Vous avez déjà un compte ?"," ",e.jsx(z,{to:"/login",className:"font-medium text-primary hover:underline",children:"Se connecter"})]})})]})]})})}export{le as default};
