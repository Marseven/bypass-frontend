import{r as d,j as e,ac as Pe,L as re,B as m,x as Te,q as S,D as Ue,z as ze,A as Le,F as Ie,G as $e,H as Fe,E as Re,M as Be,v as Me,S as i,U as I,h as _,e as P,J as h}from"./index-CyOAHu-7.js";import{C as y,a as D,b as $,c as ie,d as qe}from"./card-mEsr4_Q3.js";import{L as g}from"./label-j4rRTtOi.js";import{S as O,a as G,b as J,c as K,d as n}from"./select-DdqgSXXm.js";import{T as me,a as ne,b as T,c as o,d as ce,e as c}from"./table-BAcQ0mkG.js";import{A as de,a as oe,T as xe,b as he,c as ue,d as pe,e as fe,f as je,g as we,h as Ne}from"./alert-dialog-CpvFpJPv.js";import{P as He,a as Ve,b as Q,c as Oe,d as Ge,e as Je}from"./pagination-DB00WJM2.js";import{B as Ke,a as Qe,b as ge,c as We,d as Xe,e as Ye}from"./breadcrumb-r8xuwkv1.js";import{P as Ze}from"./phone-input-C8Hvf7fq.js";import{A as es}from"./arrow-left-D8m94IJc.js";import{P as W}from"./plus-CBVEqQSs.js";import{E as ss}from"./eye-off-Bx7GuuI4.js";import{L as as,T as ts}from"./table-CVp3HQrv.js";import{P as ve}from"./pencil-ClGAkOnH.js";import"./index-jL3W9TKE.js";import"./index-97LdqQJ2.js";const gs=()=>{const[u,F]=d.useState([]),[k,be]=d.useState(""),[U,ye]=d.useState("all"),[Ae,p]=d.useState(!1),[R,Ce]=d.useState(!1),[f,A]=d.useState(null),[w,z]=d.useState(1),[v,Se]=d.useState(3),[C,X]=d.useState("grid"),[B,M]=d.useState(!0),[Y,N]=d.useState(!1),[t,x]=d.useState({firstName:"",lastName:"",username:"",email:"",role:"operateur",department:"",full_name:"",password:"",zone:"",phone:"",id:"",employeeId:""}),_e=["operateur","technicien","instrumentiste","chef_de_quart","responsable_hse","resp_exploitation","directeur","administrateur"],j=u.filter(s=>{const r=(s.full_name||`${s.firstName||""} ${s.lastName||""}`.trim()).toLowerCase().includes(k.toLowerCase())||s.email.toLowerCase().includes(k.toLowerCase())||s.phone&&s.phone.toLowerCase().includes(k.toLowerCase()),l=U==="all"||s.role===U;return r&&l}),L=Math.ceil(j.length/v),q=(w-1)*v,Z=q+v,H=j.slice(q,Z);d.useEffect(()=>{z(1)},[k,U,v]);const De=async()=>{var a,r;N(!0),{id:`${Date.now()}`,...t};const s={firstName:t.firstName,lastName:t.lastName,email:t.email,password:t.password,phone:t.phone,role:t.role};try{const l=await P({method:"post",url:"/users",data:s});await E(),l?h.success("Utilisateur ajouté avec succès"):h.error("Erreur durant l'ajout"),x({firstName:"",lastName:"",email:"",role:"user",department:"",password:"",full_name:"",zone:"",phone:"",employeeId:"",username:"",id:""}),A(null),p(!1)}catch(l){console.error("Error:",l),h.error(((r=(a=l.response)==null?void 0:a.data)==null?void 0:r.message)||"Erreur lors de l'ajout de l'utilisateur")}finally{N(!1)}},ee=s=>{A(s),N(!1);let a=s.firstName||"",r=s.lastName||"";if(!a&&!r&&s.full_name){const l=s.full_name.trim().split(/\s+/);l.length>0&&(a=l[0],r=l.slice(1).join(" ")||"")}x({firstName:a,lastName:r,email:s.email,role:s.role,full_name:s.full_name||`${a} ${r}`.trim()||"",department:s.department||"",zone:s.zone||"",phone:s.phone||"",username:s.username||"",password:"",id:s.id,employeeId:s.employeeId||""}),p(!0)},ke=async()=>{var s,a;if(f){N(!0),F(u.map(b=>b.id===f.id?{...f,...t}:b));const r=`${t.firstName||""} ${t.lastName||""}`.trim(),l={username:t.username,email:t.email,phone:t.phone,full_name:r||t.full_name};t.password&&(l.password=t.password),t.role&&(l.role=t.role);try{const b=await P({method:"put",url:`/users/${t.id}`,data:l});await E(),b?h.success("Utilisateur modifié avec succès"):h.error("Erreur lors de la modification!"),x({firstName:"",lastName:"",username:"",email:"",role:"user",full_name:"",password:"",department:"",zone:"",phone:"",employeeId:"",id:""}),A(null),p(!1)}catch(b){console.error("Error:",b),h.error(((a=(s=b.response)==null?void 0:s.data)==null?void 0:a.message)||"Erreur lors de la modification de l'utilisateur")}finally{N(!1)}}},se=()=>{A(null),N(!1),x({firstName:"",lastName:"",username:"",email:"",role:"user",department:"",full_name:"",password:"",zone:"",phone:"",id:"",employeeId:""}),p(!0)},ae=s=>{P.delete(`/users/${s}`).then(()=>{E(),h.success("Utilisateur supprimé avec succès")}).catch(a=>{var r,l;console.error("Error:",a),h.error(((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.message)||"Erreur lors de la suppression de l'utilisateur")})},te=s=>{const a=u.find(r=>r.id===s);a&&P.put(`/users/${s}`,{is_active:!a.isActive}).then(()=>{E(),h.success("Statut utilisateur modifié")}).catch(r=>{console.error("Error:",r),h.error("Erreur lors de la modification du statut")})},le=s=>{switch(s){case"administrateur":case"administrator":return"destructive";case"directeur":case"director":return"default";case"resp_exploitation":return"default";case"responsable_hse":return"secondary";case"chef_de_quart":case"supervisor":return"secondary";case"instrumentiste":return"outline";case"technicien":return"outline";case"operateur":case"user":return"outline";default:return"outline"}},Ee={operateur:"Opérateur",technicien:"Technicien",instrumentiste:"Instrumentiste",chef_de_quart:"Chef de quart",responsable_hse:"Responsable HSE",resp_exploitation:"Resp. Exploitation",directeur:"Directeur",administrateur:"Administrateur",user:"Utilisateur",supervisor:"Superviseur",director:"Directeur",administrator:"Administrateur"},V=s=>Ee[s]||s,E=async()=>(M(!0),P.get("/users").then(s=>{const a=s.data.data;if(a&&a.length!==0){const r=a.map(l=>({id:l.id,full_name:l.full_name,email:l.email,role:l.role,phone:l.phone,username:l.username,isActive:l.is_active==1,spatie_roles:l.spatie_roles||[l.role]}));F(r)}else F([]);M(!1)}).catch(s=>{console.error("Error fetching data:",s),h.error("Erreur lors du chargement des utilisateurs"),M(!1)}));return d.useEffect(()=>{E()},[]),e.jsxs("div",{className:"w-full p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 overflow-x-hidden box-border",children:[e.jsx(y,{className:"bg-card rounded-lg border",children:e.jsx(D,{className:"p-3 sm:p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(Pe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-foreground break-words mb-1 truncate",children:"Gestion des Utilisateurs"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground break-words mb-2 line-clamp-1",children:"Gérez les utilisateurs et leurs permissions"}),e.jsx(Ke,{children:e.jsxs(Qe,{className:"flex-wrap",children:[e.jsx(ge,{children:e.jsx(We,{asChild:!0,children:e.jsx(re,{to:"/",className:"truncate",children:"Tableau de bord"})})}),e.jsx(Xe,{}),e.jsx(ge,{children:e.jsx(Ye,{className:"truncate",children:"Utilisateurs"})})]})})]})]}),e.jsx(m,{variant:"outline",size:"icon",className:"flex-shrink-0 rounded-full w-9 h-9 sm:w-10 sm:h-10",asChild:!0,children:e.jsx(re,{to:"/",children:e.jsx(es,{className:"w-4 h-4"})})})]})})}),e.jsx(y,{children:e.jsx(D,{className:"p-3 sm:p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 items-stretch sm:items-center justify-between w-full min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 flex-1 w-full min-w-0",children:[e.jsx("div",{className:"w-full sm:min-w-[150px] sm:max-w-[300px] flex-1 min-w-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground z-10"}),e.jsx(S,{id:"search",placeholder:"Nom, email ou téléphone...",value:k,onChange:s=>be(s.target.value),className:"pl-8 sm:pl-10 text-xs sm:text-sm md:text-base w-full min-w-0"})]})}),e.jsx("div",{className:"w-full sm:min-w-[140px] sm:max-w-[200px] flex-shrink-0",children:e.jsxs(O,{value:U,onValueChange:ye,children:[e.jsx(G,{className:"w-full text-xs sm:text-sm md:text-base min-w-0",children:e.jsx(J,{placeholder:"Rôle"})}),e.jsxs(K,{children:[e.jsx(n,{value:"all",children:"Tous les rôles"}),_e.map(s=>e.jsx(n,{value:s,children:V(s)},s))]})]})})]}),e.jsxs(Ue,{open:Ae,onOpenChange:s=>{p(s),s||(A(null),N(!1),x({firstName:"",lastName:"",username:"",email:"",role:"operateur",department:"",full_name:"",password:"",zone:"",phone:"",id:"",employeeId:""}))},children:[e.jsx(ze,{asChild:!0,children:e.jsxs(m,{onClick:se,className:"gap-1.5 sm:gap-2 w-full sm:w-auto flex-shrink-0 text-xs sm:text-sm h-9 sm:h-10",children:[e.jsx(W,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Ajouter un utilisateur"}),e.jsx("span",{className:"sm:hidden truncate",children:"Ajouter"})]})}),e.jsxs(Le,{className:"max-w-lg w-[95vw] sm:w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ie,{children:[e.jsx($e,{children:f?"Modifier l'utilisateur":"Ajouter un utilisateur"}),e.jsx(Fe,{children:f?"Modifiez les informations de l'utilisateur.":"Ajoutez un nouveau utilisateur au système."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),f?ke():De()},className:"space-y-3 sm:space-y-4 w-full min-w-0",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full min-w-0",children:[e.jsxs("div",{className:"w-full min-w-0",children:[e.jsx(g,{htmlFor:"firstName",children:"Prénom"}),e.jsx(S,{id:"firstName",value:t.firstName,onChange:s=>x({...t,firstName:s.target.value}),placeholder:"Prénom de l'utilisateur",required:!0,className:"w-full min-w-0"})]}),e.jsxs("div",{className:"w-full min-w-0",children:[e.jsx(g,{htmlFor:"lastName",children:"Nom"}),e.jsx(S,{id:"lastName",value:t.lastName,onChange:s=>x({...t,lastName:s.target.value}),placeholder:"Nom de l'utilisateur",required:!0,className:"w-full min-w-0"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 w-full min-w-0",children:e.jsxs("div",{className:"w-full min-w-0",children:[e.jsx(g,{htmlFor:"username",children:"Nom d'utilisateur"}),e.jsx(S,{id:"username",value:t.username,onChange:s=>x({...t,username:s.target.value}),placeholder:"Nom d'utilisateur",required:!0,className:"w-full min-w-0"})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 w-full min-w-0",children:e.jsxs("div",{className:"w-full min-w-0",children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsx(S,{id:"email",type:"email",value:t.email,onChange:s=>x({...t,email:s.target.value}),placeholder:"Email de l'utilisateur",required:!0,className:"w-full min-w-0"})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 w-full min-w-0",children:e.jsxs("div",{className:"w-full min-w-0",children:[e.jsx(g,{htmlFor:"password",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{id:"password",type:R?"text":"password",value:t.password,onChange:s=>x({...t,password:s.target.value}),placeholder:"Mot de passe",required:!f,className:"w-full min-w-0 pr-10"}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-1/2 -translate-y-1/2 h-8 w-8 p-0 hover:bg-transparent",onClick:()=>Ce(!R),children:R?e.jsx(ss,{className:"h-4 w-4"}):e.jsx(Re,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 w-full min-w-0",children:e.jsxs("div",{className:"w-full min-w-0",children:[e.jsx(g,{htmlFor:"phone",children:"Téléphone"}),e.jsx(Ze,{id:"phone",value:t.phone,onChange:s=>x({...t,phone:s||""}),placeholder:"Numéro de téléphone",className:"w-full min-w-0"})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 w-full min-w-0",children:e.jsxs("div",{className:"w-full min-w-0",children:[e.jsx(g,{htmlFor:"role",children:"Rôle"}),e.jsxs(O,{value:t.role,onValueChange:s=>x({...t,role:s}),children:[e.jsx(G,{className:"w-full min-w-0",children:e.jsx(J,{placeholder:"Sélectionner un rôle"})}),e.jsxs(K,{children:[e.jsx(n,{value:"operateur",children:"Opérateur"}),e.jsx(n,{value:"technicien",children:"Technicien"}),e.jsx(n,{value:"instrumentiste",children:"Instrumentiste"}),e.jsx(n,{value:"chef_de_quart",children:"Chef de quart"}),e.jsx(n,{value:"responsable_hse",children:"Responsable HSE"}),e.jsx(n,{value:"resp_exploitation",children:"Resp. Exploitation"}),e.jsx(n,{value:"directeur",children:"Directeur"}),e.jsx(n,{value:"administrateur",children:"Administrateur"})]})]})]})}),e.jsxs(Be,{className:"flex-col sm:flex-row gap-2 sm:gap-0 w-full min-w-0",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>{p(!1),A(null),N(!1),x({firstName:"",lastName:"",username:"",email:"",role:"operateur",department:"",full_name:"",password:"",zone:"",phone:"",id:"",employeeId:""})},className:"w-full sm:w-auto text-sm",children:"Annuler"}),e.jsx(m,{type:"submit",className:"w-full sm:w-auto text-sm",disabled:Y,children:Y?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"mr-2 h-4 w-4 animate-spin"}),f?"Modification...":"Ajout..."]}):f?"Modifier":"Ajouter"})]})]})]})]})]})})}),j.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 sm:gap-4 mt-3 sm:mt-4 w-full min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 min-w-0 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(g,{htmlFor:"items-per-page",className:"text-xs sm:text-sm whitespace-nowrap flex-shrink-0",children:"Éléments par page:"}),e.jsxs(O,{value:v.toString(),onValueChange:s=>Se(Number(s)),children:[e.jsx(G,{className:"w-16 sm:w-20 flex-shrink-0 h-8 text-xs sm:text-sm",children:e.jsx(J,{})}),e.jsxs(K,{children:[e.jsx(n,{value:"3",children:"3"}),e.jsx(n,{value:"6",children:"6"}),e.jsx(n,{value:"9",children:"9"}),e.jsx(n,{value:"12",children:"12"}),e.jsx(n,{value:"15",children:"15"})]})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-1 border rounded-md p-0.5",children:[e.jsx(m,{variant:C==="grid"?"default":"ghost",size:"sm",onClick:()=>X("grid"),className:"h-7",title:"Vue grille",children:e.jsx(as,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx(m,{variant:C==="table"?"default":"ghost",size:"sm",onClick:()=>X("table"),className:"h-7",title:"Vue tableau",children:e.jsx(ts,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-left truncate whitespace-nowrap",children:["Affichage de ",q+1," à ",Math.min(Z,j.length)," sur ",j.length," utilisateur",j.length>1?"s":""]})]}),B?e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-3 md:gap-4 w-full min-w-0 ${C==="table"?"lg:hidden":""}`,children:Array.from({length:v}).map((s,a)=>e.jsxs(y,{className:"flex flex-col h-full w-full min-w-0 box-border",children:[e.jsxs($,{className:"pb-3 sm:pb-4 p-4 sm:p-5 md:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1 sm:gap-1.5 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 min-w-0 flex-1",children:[e.jsx(i,{className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full"}),e.jsx(i,{className:"h-4 sm:h-5 w-20 sm:w-24"})]}),e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx(i,{className:"h-5 w-5 sm:h-6 sm:w-6"}),e.jsx(i,{className:"h-5 w-5 sm:h-6 sm:w-6"})]})]}),e.jsx(i,{className:"h-3 w-full mt-1.5"})]}),e.jsxs(D,{className:"space-y-1.5 sm:space-y-2 p-4 sm:p-5 md:p-6 pt-0 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"h-3 w-20"}),e.jsx(i,{className:"h-5 w-12"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"h-3 w-16"}),e.jsx(i,{className:"h-5 w-16"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"h-3 w-20"}),e.jsx(i,{className:"h-5 w-16"})]})]})]},a))}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-3 md:gap-4 w-full min-w-0 ${C==="table"?"lg:hidden":""}`,children:H.map(s=>e.jsxs(y,{className:"hover:shadow-lg transition-shadow flex flex-col h-full w-full min-w-0 box-border",children:[e.jsxs($,{className:"pb-3 sm:pb-4 p-4 sm:p-5 md:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1 sm:gap-1.5 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 min-w-0 flex-1",children:[e.jsx(I,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary flex-shrink-0"}),e.jsx(ie,{className:"text-sm sm:text-base md:text-lg truncate min-w-0",children:s.full_name||`${s.firstName||""} ${s.lastName||""}`.trim()||"N/A"})]}),e.jsxs("div",{className:"flex gap-0.5 flex-shrink-0",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{ee(s),p(!0)},className:"h-6 w-6 p-0",title:"Modifier",children:e.jsx(ve,{className:"w-3 h-3"})}),e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-destructive hover:text-destructive",title:"Supprimer",children:e.jsx(xe,{className:"w-3 h-3"})})}),e.jsxs(he,{className:"w-[95vw] max-w-md",children:[e.jsxs(ue,{children:[e.jsx(pe,{className:"text-base sm:text-lg",children:"Supprimer l'utilisateur"}),e.jsx(fe,{className:"text-sm",children:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible."})]}),e.jsxs(je,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(we,{className:"w-full sm:w-auto text-sm",children:"Annuler"}),e.jsx(Ne,{onClick:()=>ae(s.id),className:"w-full sm:w-auto text-sm",children:"Supprimer"})]})]})]})]})]}),e.jsx(qe,{className:"text-xs line-clamp-2 mt-1.5",children:s.email})]}),e.jsxs(D,{className:"space-y-1.5 sm:space-y-2 p-4 sm:p-5 md:p-6 pt-0 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between min-w-0 gap-2",children:[e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:"Nom d'utilisateur:"}),e.jsx(_,{variant:"outline",className:"text-[10px] sm:text-xs flex-shrink-0 whitespace-nowrap",children:s.username||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between min-w-0 gap-2",children:[e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:"Rôle:"}),e.jsx("div",{className:"flex flex-wrap gap-1 flex-shrink-0",children:(s.spatie_roles||[s.role]).map(a=>e.jsx(_,{variant:le(a),className:"text-[10px] sm:text-xs whitespace-nowrap",children:V(a)},a))})]}),e.jsxs("div",{className:"flex items-center justify-between min-w-0 gap-2",children:[e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:"Téléphone:"}),e.jsx("span",{className:"text-[10px] sm:text-xs truncate ml-2",children:s.phone||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between min-w-0 gap-2",children:[e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:"Statut:"}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>te(s.id),className:"h-auto p-0 flex-shrink-0",children:e.jsx(_,{variant:s.isActive?"default":"secondary",className:"text-[10px] sm:text-xs whitespace-nowrap",children:s.isActive?"Actif":"Inactif"})})]})]})]},s.id))}),C==="table"&&e.jsxs(y,{className:"w-full min-w-0 box-border hidden lg:block",children:[e.jsx($,{className:"p-2 sm:p-3 md:p-4",children:e.jsxs(ie,{className:"text-xs sm:text-sm md:text-base",children:["Utilisateurs (",j.length,")"]})}),e.jsx(D,{className:"p-0 sm:p-2 md:p-3 w-full min-w-0 overflow-x-auto",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(me,{className:"w-full min-w-[600px]",children:[e.jsx(ne,{children:e.jsxs(T,{children:[e.jsx(o,{className:"text-[10px] sm:text-xs md:text-sm",children:"Nom"}),e.jsx(o,{className:"text-[10px] sm:text-xs md:text-sm",children:"Email"}),e.jsx(o,{className:"text-[10px] sm:text-xs md:text-sm",children:"Nom d'utilisateur"}),e.jsx(o,{className:"text-[10px] sm:text-xs md:text-sm",children:"Rôle"}),e.jsx(o,{className:"text-[10px] sm:text-xs md:text-sm",children:"Téléphone"}),e.jsx(o,{className:"text-[10px] sm:text-xs md:text-sm",children:"Statut"}),e.jsx(o,{className:"text-[10px] sm:text-xs md:text-sm",children:"Actions"})]})}),e.jsx(ce,{children:H.length===0?e.jsx(T,{children:e.jsxs(c,{colSpan:7,className:"text-center py-6 sm:py-8",children:[e.jsx(I,{className:"w-10 h-10 sm:w-12 sm:h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:u.length===0?"Aucun utilisateur":"Aucun résultat"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-4",children:u.length===0?"Commencez par ajouter votre premier utilisateur.":"Aucun utilisateur ne correspond à vos critères de recherche."}),u.length===0&&e.jsxs(m,{onClick:se,className:"w-full sm:w-auto",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Ajouter un utilisateur"]})]})}):H.map(s=>e.jsxs(T,{children:[e.jsx(c,{className:"font-medium text-xs sm:text-sm max-w-[120px] sm:max-w-[150px] md:max-w-none",children:e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 min-w-0",children:[e.jsx(I,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.full_name||`${s.firstName||""} ${s.lastName||""}`.trim()||"N/A"})]})}),e.jsx(c,{className:"text-xs sm:text-sm max-w-[150px] sm:max-w-xs truncate min-w-0",children:s.email}),e.jsx(c,{className:"text-xs sm:text-sm whitespace-nowrap",children:e.jsx(_,{variant:"outline",className:"text-[10px] sm:text-xs md:text-sm",children:s.username||"N/A"})}),e.jsx(c,{className:"whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(s.spatie_roles||[s.role]).map(a=>e.jsx(_,{variant:le(a),className:"text-[10px] sm:text-xs md:text-sm",children:V(a)},a))})}),e.jsx(c,{className:"text-xs sm:text-sm truncate max-w-[100px] sm:max-w-[120px] min-w-0",children:s.phone||"N/A"}),e.jsx(c,{className:"whitespace-nowrap",children:e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>te(s.id),className:"h-auto p-0",children:e.jsx(_,{variant:s.isActive?"default":"secondary",className:"text-xs sm:text-sm",children:s.isActive?"Actif":"Inactif"})})}),e.jsx(c,{className:"whitespace-nowrap",children:e.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{ee(s),p(!0)},className:"h-8 w-8 p-0",title:"Modifier",children:e.jsx(ve,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",title:"Supprimer",children:e.jsx(xe,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),e.jsxs(he,{className:"w-[95vw] max-w-md",children:[e.jsxs(ue,{children:[e.jsx(pe,{className:"text-base sm:text-lg",children:"Supprimer l'utilisateur"}),e.jsx(fe,{className:"text-sm",children:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible."})]}),e.jsxs(je,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(we,{className:"w-full sm:w-auto text-sm",children:"Annuler"}),e.jsx(Ne,{onClick:()=>ae(s.id),className:"w-full sm:w-auto text-sm",children:"Supprimer"})]})]})]})]})})]},s.id))})]})})})]})]}),B&&C==="table"&&e.jsxs(y,{className:"w-full min-w-0 box-border hidden lg:block",children:[e.jsx($,{className:"p-2 sm:p-3 md:p-4",children:e.jsx(i,{className:"h-4 sm:h-5 w-24 sm:w-32"})}),e.jsx(D,{className:"p-0 sm:p-2 md:p-3 w-full min-w-0 overflow-x-auto",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(me,{className:"w-full",children:[e.jsx(ne,{children:e.jsxs(T,{children:[e.jsx(o,{className:"text-xs sm:text-sm",children:"Nom"}),e.jsx(o,{className:"text-xs sm:text-sm",children:"Email"}),e.jsx(o,{className:"text-xs sm:text-sm",children:"Nom d'utilisateur"}),e.jsx(o,{className:"text-xs sm:text-sm",children:"Rôle"}),e.jsx(o,{className:"text-xs sm:text-sm",children:"Téléphone"}),e.jsx(o,{className:"text-xs sm:text-sm",children:"Statut"}),e.jsx(o,{className:"text-xs sm:text-sm",children:"Actions"})]})}),e.jsx(ce,{children:Array.from({length:v}).map((s,a)=>e.jsxs(T,{children:[e.jsx(c,{children:e.jsx(i,{className:"h-4 w-24"})}),e.jsx(c,{children:e.jsx(i,{className:"h-4 w-32"})}),e.jsx(c,{children:e.jsx(i,{className:"h-5 w-20"})}),e.jsx(c,{children:e.jsx(i,{className:"h-5 w-16"})}),e.jsx(c,{children:e.jsx(i,{className:"h-4 w-20"})}),e.jsx(c,{children:e.jsx(i,{className:"h-5 w-16"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"h-8 w-8"}),e.jsx(i,{className:"h-8 w-8"})]})})]},a))})]})})})]}),!B&&j.length===0&&e.jsxs(y,{className:"p-6 sm:p-12 text-center",children:[e.jsx(I,{className:"w-10 h-10 sm:w-12 sm:h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:u.length===0?"Aucun utilisateur":"Aucun résultat"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-4",children:u.length===0?"Commencez par ajouter votre premier utilisateur.":"Aucun utilisateur ne correspond à vos critères de recherche."}),u.length===0&&e.jsxs(m,{onClick:()=>p(!0),className:"w-full sm:w-auto",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Ajouter un utilisateur"]})]}),j.length>0&&L>1&&e.jsx("div",{className:"flex justify-center sm:justify-end items-center mt-4 sm:mt-6 w-full min-w-0 overflow-x-hidden",children:e.jsx(He,{children:e.jsxs(Ve,{className:"flex-wrap min-w-0",children:[e.jsx(Q,{children:e.jsx(Oe,{href:"#",onClick:s=>{s.preventDefault(),w>1&&z(w-1)},className:w===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:L},(s,a)=>a+1).map(s=>e.jsx(Q,{children:e.jsx(Ge,{href:"#",onClick:a=>{a.preventDefault(),z(s)},isActive:w===s,className:"cursor-pointer",children:s})},s)),e.jsx(Q,{children:e.jsx(Je,{href:"#",onClick:s=>{s.preventDefault(),w<L&&z(w+1)},className:w===L?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]})};export{gs as default};
