import{a8 as Re,N as Ue,r as m,j as e,f as Ke,L as pe,B as u,K as Je,q as Q,D as Qe,w as We,x as Xe,y as Ye,z as es,A as ss,M as ts,v as as,S as n,ab as ie,h as A,R as is,e as Z}from"./index-BczWxPqK.js";import{C as L,a as F,b as W,c as je,d as ls}from"./card-oZQTdWFE.js";import{L as g}from"./label-gqyoG80I.js";import{A as fe,a as we,T as Ne,b as ge,c as ve,d as be,e as ye,f as Ce,g as Se,h as ze}from"./alert-dialog-BmnXhzd-.js";import{S as y,a as C,b as S,c as z,d as r}from"./select-CiETPwVI.js";import{T as _e,a as ke,b as q,c as d,d as De,e as c}from"./table-CzPeITGD.js";import{P as ns,a as rs,b as O,c as cs,d as Ae,e as ms}from"./pagination-CMbAxhuR.js";import{B as ds,a as xs,b as Le,c as os,d as hs,e as us}from"./breadcrumb-CtRI8p6G.js";import{e as ps}from"./exportData-DV5nx9fi.js";import{U as js,C as fs}from"./CsvImportDialog-DLS_BUik.js";import{g as x,e as G,a as H,c as R}from"./statusLabels-Cvvyzy4o.js";import{A as ws}from"./arrow-left-CNdL_MWX.js";import{D as Ns}from"./download-Ca9os_lj.js";import{P as le}from"./plus-BlODmAW9.js";import{L as gs,T as vs}from"./table-D-vQgLYC.js";import{P as Te}from"./pen-6K1olmgN.js";import"./index-Cs9P0kFJ.js";import"./file-text-CSi2gb9O.js";const Vs=()=>{const{toast:N}=Re(),f=Ue(),[v,X]=m.useState([]),[Ee,I]=m.useState(!1),[Fe,ne]=m.useState(!1),[_,P]=m.useState(null),[U,Ie]=m.useState(""),[$,Pe]=m.useState("all"),[K,$e]=m.useState("all"),[re,Me]=m.useState([]),[j,D]=m.useState(1),[b,Be]=m.useState(3),[M,ce]=m.useState("grid"),[Y,J]=m.useState(!0),[me,T]=m.useState(!1),[i,w]=m.useState({}),[t,o]=m.useState({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:"",type_systeme:"process",niveau_sil:"na",fonction_securite:""}),Ve=["conveyor","crusher","pump","fan","separator","loader","truck","drill"],de=["operational","maintenance","down","standby"],Ze=["low","medium","high","critical"],qe=async()=>{try{const s=await Z.get("/zones").then(a=>{if(a.data.data.length!==0){const p=a.data.data.map((l,E)=>({id:`${E+1}`,name:l.name,description:`${l.description.toLowerCase()}`,equipmentCount:l.equipements.length}));Me(p)}}).catch(a=>{console.error("Error fetching data:",a)})}catch(s){console.error("Erreur lors du GET zones :",s)}},B=async()=>{J(!0);try{const s=await Z.get("/equipment").then(a=>{if(a.data.data.length!==0){const p=a.data.data.map((l,E)=>{var k;return{id:l.id,name:l.name,code:l.code,type:l.type,zone:((k=l.zone)==null?void 0:k.name)||"N/A",fabricant:l.fabricant,status:l.status,criticite:l.criticite,sensors:l.sensors}});X(p)}J(!1)}).catch(a=>{console.error("Error fetching data:",a),J(!1)})}catch(s){console.error("Erreur lors du GET equipment :",s),J(!1)}};m.useEffect(()=>{qe(),B()},[]);const xe=s=>{switch(s){case"operational":return"bg-primary";case"maintenance":return"bg-yellow-500";case"down":return"bg-red-500";case"standby":return"bg-gray-500";default:return"bg-gray-400"}},ee=s=>{switch(s){case"low":return"text-primary";case"medium":return"text-yellow-600";case"high":return"text-orange-600";case"critical":return"text-red-600";default:return"text-gray-600"}},h=v.filter(s=>{const a=s.name.toLowerCase().includes(U.toLowerCase())||s.code.toLowerCase().includes(U.toLowerCase()),p=$==="all"||s.zone===$,l=K==="all"||s.status===K;return console.log($),a&&p&&l}),V=Math.ceil(h.length/b),se=(j-1)*b,oe=se+b,te=h.slice(se,oe);m.useEffect(()=>{D(1)},[U,$,K,b]),m.useEffect(()=>{const s=Math.ceil(h.length/b);h.length===0?D(1):s>0&&j>s&&D(s)},[h.length,b,j]);const Oe=()=>{const s={};return t.name.trim()||(s.name="Le nom est requis"),t.type||(s.type="Le type est requis"),t.zone||(s.zone="La zone est requise"),t.fabricant.trim()||(s.fabricant="Le fabricant est requis"),t.status||(s.status="Le statut est requis"),t.criticite||(s.criticite="La criticité est requise"),w(s),Object.keys(s).length===0},Ge=async s=>{var a,p;if(s.preventDefault(),!!Oe()){T(!0);try{if(_){X(v.map(k=>k.id===_.id?{...k,...t,updatedAt:new Date}:k));const l={name:t.name.trim(),type:t.type,zone:t.zone,fabricant:t.fabricant.trim(),status:t.status,criticite:t.criticite,...t.model&&{model:t.model.trim()},type_systeme:t.type_systeme,niveau_sil:t.niveau_sil,...t.fonction_securite&&{fonction_securite:t.fonction_securite.trim()}},E=await Z({method:"put",url:`/equipment/${_.id}`,data:l});await B(),N(E?{title:"Équipement modifié",description:"L'équipement a été mis à jour avec succès."}:{title:"Échec de la mise à jour",variant:"destructive"})}else{const l={id:`eq_${Date.now()}`,...t,installationDate:new Date,sensors:[]};X([...v,l]);const E={name:t.name.trim(),type:t.type,zone:t.zone,fabricant:t.fabricant.trim(),status:t.status,criticite:t.criticite,...t.model&&{model:t.model.trim()},type_systeme:t.type_systeme,niveau_sil:t.niveau_sil,...t.fonction_securite&&{fonction_securite:t.fonction_securite.trim()}},k=await Z({method:"post",url:"/equipment",data:E});await B(),N(k?{title:"Équipement créé",description:"Le nouvel équipement a été ajouté avec succès."}:{title:"Échec de la création",variant:"destructive"})}I(!1),P(null),w({}),o({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:"",type_systeme:"process",niveau_sil:"na",fonction_securite:""})}catch(l){console.error("Error submitting equipment:",l),N({title:"Erreur",description:((p=(a=l.response)==null?void 0:a.data)==null?void 0:p.message)||(_?"Erreur lors de la modification de l'équipement.":"Erreur lors de la création de l'équipement."),variant:"destructive"})}finally{T(!1)}}},he=s=>{P(s),T(!1),o({name:s.name,type:s.type,zone:s.zone,fabricant:s.fabricant,model:s.model,status:s.status,criticite:s.criticite,type_systeme:s.type_systeme||"process",niveau_sil:s.niveau_sil||"na",fonction_securite:s.fonction_securite||""}),I(!0)},ue=async s=>{var a,p;try{await Z.delete(`/equipment/${s}`),N({title:"Équipement supprimé",description:"L'équipement a été supprimé avec succès."}),await B()}catch(l){console.error("Error deleting equipment:",l),N({title:"Erreur",description:((p=(a=l.response)==null?void 0:a.data)==null?void 0:p.message)||"Erreur lors de la suppression de l'équipement.",variant:"destructive"})}},ae=()=>{P(null),T(!1),w({}),o({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:""}),I(!0)},He=()=>{try{const s=h.map(a=>({Code:a.code,Nom:a.name,Type:x(H,a.type),Zone:a.zone,Fabricant:a.fabricant||"N/A",Statut:x(G,a.status),Criticité:x(R,a.criticite),"Nombre de capteurs":a.sensors?a.sensors.length:0}));ps(s,`equipements_${new Date().toISOString().split("T")[0]}`),N({title:"Export réussi",description:"Les données ont été exportées avec succès."})}catch(s){console.error("Error exporting data:",s),N({title:"Erreur d'export",description:"Une erreur est survenue lors de l'export des données.",variant:"destructive"})}};return e.jsxs("div",{className:"w-full p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 overflow-x-hidden box-border",children:[e.jsx(L,{className:"bg-card rounded-lg border",children:e.jsx(F,{className:"p-3 sm:p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(Ke,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-foreground break-words mb-1 truncate",children:"Gestion des Équipements"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground break-words mb-2 line-clamp-1",children:"Gérez vos équipements industriels"}),e.jsx(ds,{children:e.jsxs(xs,{className:"flex-wrap",children:[e.jsx(Le,{children:e.jsx(os,{asChild:!0,children:e.jsx(pe,{to:"/",className:"truncate",children:"Tableau de bord"})})}),e.jsx(hs,{}),e.jsx(Le,{children:e.jsx(us,{className:"truncate",children:"Équipements"})})]})})]})]}),e.jsx(u,{variant:"outline",size:"icon",className:"flex-shrink-0 rounded-full w-9 h-9 sm:w-10 sm:h-10",asChild:!0,children:e.jsx(pe,{to:"/",children:e.jsx(ws,{className:"w-4 h-4"})})})]})})}),e.jsx(L,{children:e.jsx(F,{className:"p-3 sm:p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 items-stretch sm:items-center justify-between w-full min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 flex-1 w-full min-w-0",children:[e.jsx("div",{className:"w-full sm:min-w-[150px] sm:max-w-[300px] flex-1 min-w-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground z-10"}),e.jsx(Q,{id:"search",placeholder:"Nom ou code...",value:U,onChange:s=>Ie(s.target.value),className:"pl-8 sm:pl-10 text-xs sm:text-sm md:text-base w-full min-w-0"})]})}),e.jsx("div",{className:"w-full sm:min-w-[140px] sm:max-w-[200px] flex-shrink-0",children:e.jsxs(y,{value:$,onValueChange:Pe,children:[e.jsx(C,{className:"w-full text-xs sm:text-sm md:text-base min-w-0",children:e.jsx(S,{placeholder:"Zone"})}),e.jsxs(z,{children:[e.jsx(r,{value:"all",children:"Toutes les zones"}),re.map(s=>e.jsx(r,{value:s.name,children:s.name},s.id))]})]})}),e.jsx("div",{className:"w-full sm:min-w-[140px] sm:max-w-[200px] flex-shrink-0",children:e.jsxs(y,{value:K,onValueChange:$e,children:[e.jsx(C,{className:"w-full text-xs sm:text-sm md:text-base min-w-0",children:e.jsx(S,{placeholder:"Statut"})}),e.jsxs(z,{children:[e.jsx(r,{value:"all",children:"Tous les statuts"}),de.map(s=>e.jsx(r,{value:s,children:x(G,s)},s))]})]})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto flex-shrink-0",children:[e.jsxs(u,{onClick:()=>ne(!0),variant:"outline",className:"gap-1.5 sm:gap-2 w-full sm:w-auto flex-shrink-0 text-xs sm:text-sm h-9 sm:h-10",size:f?"sm":"default",children:[e.jsx(js,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Importer"}),e.jsx("span",{className:"sm:hidden truncate",children:"Import"})]}),e.jsxs(u,{onClick:He,variant:"outline",className:"gap-1.5 sm:gap-2 w-full sm:w-auto flex-shrink-0 text-xs sm:text-sm h-9 sm:h-10",size:f?"sm":"default",disabled:h.length===0,children:[e.jsx(Ns,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Exporter"}),e.jsx("span",{className:"sm:hidden truncate",children:"Export"})]}),e.jsxs(Qe,{open:Ee,onOpenChange:s=>{I(s),s||(P(null),T(!1),w({}),o({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:""}))},children:[e.jsx(We,{asChild:!0,children:e.jsxs(u,{onClick:ae,className:"gap-1.5 sm:gap-2 w-full sm:w-auto flex-shrink-0 text-xs sm:text-sm h-9 sm:h-10",size:f?"sm":"default",children:[e.jsx(le,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Nouvel Équipement"}),e.jsx("span",{className:"sm:hidden truncate",children:"Nouvel"})]})}),e.jsxs(Xe,{className:"max-w-2xl w-[95vw] sm:w-full",children:[e.jsxs(Ye,{children:[e.jsx(es,{className:"text-base sm:text-lg",children:_?"Modifier l'équipement":"Créer un nouvel équipement"}),e.jsx(ss,{className:"text-xs sm:text-sm",children:_?"Modifiez les informations de l'équipement.":"Ajoutez un nouvel équipement au système."})]}),e.jsxs("form",{onSubmit:Ge,className:"space-y-4 max-h-[60vh] sm:max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"name",className:"text-sm",children:["Nom ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(Q,{id:"name",value:t.name,onChange:s=>{o({...t,name:s.target.value}),i.name&&w({...i,name:""})},placeholder:"Nom de l'équipement",required:!0,className:`text-sm sm:text-base ${i.name?"border-destructive":""}`}),i.name&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.name})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"type",className:"text-sm",children:["Type ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:t.type,onValueChange:s=>{o({...t,type:s}),i.type&&w({...i,type:""})},children:[e.jsx(C,{className:`text-sm sm:text-base ${i.type?"border-destructive":""}`,children:e.jsx(S,{placeholder:"Sélectionner un type"})}),e.jsx(z,{children:Ve.map(s=>e.jsx(r,{value:s,children:x(H,s)},s))})]}),i.type&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.type})]}),e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"zone",className:"text-sm",children:["Zone ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:t.zone,onValueChange:s=>{o({...t,zone:s}),i.zone&&w({...i,zone:""})},children:[e.jsx(C,{className:`text-sm sm:text-base ${i.zone?"border-destructive":""}`,children:e.jsx(S,{placeholder:"Sélectionner une zone"})}),e.jsx(z,{children:re.map(s=>e.jsx(r,{value:s.name,children:s.name},s.id))})]}),i.zone&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.zone})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"fabricant",className:"text-sm",children:["Fabricant ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(Q,{id:"fabricant",value:t.fabricant,onChange:s=>{o({...t,fabricant:s.target.value}),i.fabricant&&w({...i,fabricant:""})},placeholder:"Nom du fabricant",required:!0,className:`text-sm sm:text-base ${i.fabricant?"border-destructive":""}`}),i.fabricant&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.fabricant})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"status",className:"text-sm",children:["Statut ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:t.status,onValueChange:s=>{o({...t,status:s}),i.status&&w({...i,status:""})},children:[e.jsx(C,{className:`text-sm sm:text-base ${i.status?"border-destructive":""}`,children:e.jsx(S,{placeholder:"Sélectionner un statut"})}),e.jsx(z,{children:de.map(s=>e.jsx(r,{value:s,children:x(G,s)},s))})]}),i.status&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.status})]}),e.jsxs("div",{children:[e.jsxs(g,{htmlFor:"criticite",className:"text-sm",children:["Criticité ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:t.criticite,onValueChange:s=>{o({...t,criticite:s}),i.criticite&&w({...i,criticite:""})},children:[e.jsx(C,{className:`text-sm sm:text-base ${i.criticite?"border-destructive":""}`,children:e.jsx(S,{placeholder:"Sélectionner la criticité"})}),e.jsx(z,{children:Ze.map(s=>e.jsx(r,{value:s,children:x(R,s)},s))})]}),i.criticite&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.criticite})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"type_systeme",className:"text-sm",children:"Type système"}),e.jsxs(y,{value:t.type_systeme,onValueChange:s=>o({...t,type_systeme:s}),children:[e.jsx(C,{className:"text-sm sm:text-base",children:e.jsx(S,{placeholder:"Type système"})}),e.jsxs(z,{children:[e.jsx(r,{value:"process",children:"Process"}),e.jsx(r,{value:"securite",children:"Sécurité"}),e.jsx(r,{value:"feu_gaz",children:"Feu & Gaz"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"niveau_sil",className:"text-sm",children:"Niveau SIL"}),e.jsxs(y,{value:t.niveau_sil,onValueChange:s=>o({...t,niveau_sil:s}),children:[e.jsx(C,{className:"text-sm sm:text-base",children:e.jsx(S,{placeholder:"Niveau SIL"})}),e.jsxs(z,{children:[e.jsx(r,{value:"na",children:"N/A"}),e.jsx(r,{value:"sil1",children:"SIL 1"}),e.jsx(r,{value:"sil2",children:"SIL 2"}),e.jsx(r,{value:"sil3",children:"SIL 3"})]})]})]})]}),t.niveau_sil!=="na"&&e.jsxs("div",{children:[e.jsx(g,{htmlFor:"fonction_securite",className:"text-sm",children:"Fonction sécurité"}),e.jsx(Q,{id:"fonction_securite",value:t.fonction_securite,onChange:s=>o({...t,fonction_securite:s.target.value}),placeholder:"Décrivez la fonction de sécurité",className:"text-sm sm:text-base"})]}),e.jsxs(ts,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>{I(!1),P(null),T(!1),w({}),o({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:"",type_systeme:"process",niveau_sil:"na",fonction_securite:""})},className:"w-full sm:w-auto",size:f?"sm":"default",children:"Annuler"}),e.jsx(u,{type:"submit",className:"w-full sm:w-auto",size:f?"sm":"default",disabled:me||!t.name.trim()||!t.type||!t.zone||!t.fabricant.trim()||!t.status||!t.criticite,children:me?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"mr-2 h-4 w-4 animate-spin"}),_?"Modification...":"Création..."]}):_?"Modifier":"Créer"})]})]})]})]})]})]})})}),!Y&&h.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(g,{htmlFor:"items-per-page",className:"text-xs sm:text-sm whitespace-nowrap",children:"Éléments par page:"}),e.jsxs(y,{value:b.toString(),onValueChange:s=>Be(Number(s)),children:[e.jsx(C,{className:"w-16 sm:w-20 md:w-24 text-sm",children:e.jsx(S,{})}),e.jsxs(z,{children:[e.jsx(r,{value:"3",children:"3"}),e.jsx(r,{value:"6",children:"6"}),e.jsx(r,{value:"9",children:"9"}),e.jsx(r,{value:"12",children:"12"}),e.jsx(r,{value:"15",children:"15"})]})]})]}),!f&&e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-1",children:[e.jsx(u,{variant:M==="grid"?"default":"ghost",size:"sm",onClick:()=>ce("grid"),className:"h-8",children:e.jsx(gs,{className:"h-4 w-4"})}),e.jsx(u,{variant:M==="table"?"default":"ghost",size:"sm",onClick:()=>ce("table"),className:"h-8",children:e.jsx(vs,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground text-left sm:text-right w-full sm:w-auto truncate whitespace-nowrap",children:["Affichage de ",se+1," à ",Math.min(oe,h.length)," sur ",h.length," équipement",h.length>1?"s":""]})]}),Y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4 lg:gap-6 w-full min-w-0 ${M==="table"?"lg:hidden":""}`,children:Array.from({length:b}).map((s,a)=>e.jsxs(L,{className:"flex flex-col h-full w-full min-w-0 box-border",children:[e.jsxs(W,{className:"pb-3 sm:pb-3 p-4 sm:p-5 md:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5 sm:gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[e.jsx(n,{className:"w-4 h-4 sm:w-5 sm:h-5 rounded"}),e.jsx(n,{className:"h-4 sm:h-5 w-24 sm:w-32"})]}),e.jsxs("div",{className:"flex gap-0.5 flex-shrink-0",children:[e.jsx(n,{className:"h-7 w-7 sm:h-8 sm:w-8"}),e.jsx(n,{className:"h-7 w-7 sm:h-8 sm:w-8"})]})]}),e.jsx(n,{className:"h-3 sm:h-4 w-full mt-1.5 sm:mt-2"})]}),e.jsxs(F,{className:"space-y-1.5 sm:space-y-2 md:space-y-3 p-4 sm:p-5 md:p-6 pt-0 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-12"}),e.jsx(n,{className:"h-5 w-16"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-12"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsx(n,{className:"h-2 w-2 rounded-full"}),e.jsx(n,{className:"h-3 w-16"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-16"}),e.jsx(n,{className:"h-3 w-16"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-16"}),e.jsx(n,{className:"h-5 w-8"})]})]})]},a))}),M==="table"&&e.jsxs(L,{className:"w-full min-w-0 box-border hidden lg:block",children:[e.jsx(W,{className:"p-2 sm:p-3 md:p-4",children:e.jsx(n,{className:"h-5 w-32"})}),e.jsx(F,{className:"p-0 sm:p-2 md:p-3 w-full min-w-0 overflow-hidden",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(_e,{className:"w-full min-w-[700px]",children:[e.jsx(ke,{children:e.jsxs(q,{children:[e.jsx(d,{className:"min-w-[100px] text-[10px] sm:text-xs md:text-sm",children:"Nom"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Code"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Type"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Zone"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Fabricant"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Statut"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Criticité"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Capteurs"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Actions"})]})}),e.jsx(De,{children:Array.from({length:b}).map((s,a)=>e.jsxs(q,{children:[e.jsx(c,{children:e.jsx(n,{className:"h-4 w-24"})}),e.jsx(c,{className:"hidden md:table-cell",children:e.jsx(n,{className:"h-4 w-20"})}),e.jsx(c,{className:"hidden lg:table-cell",children:e.jsx(n,{className:"h-5 w-16"})}),e.jsx(c,{children:e.jsx(n,{className:"h-5 w-20"})}),e.jsx(c,{className:"hidden lg:table-cell",children:e.jsx(n,{className:"h-4 w-24"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-2 w-2 rounded-full"}),e.jsx(n,{className:"h-4 w-16"})]})}),e.jsx(c,{className:"hidden md:table-cell",children:e.jsx(n,{className:"h-4 w-16"})}),e.jsx(c,{className:"hidden md:table-cell",children:e.jsx(n,{className:"h-5 w-8"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{className:"h-8 w-8"}),e.jsx(n,{className:"h-8 w-8"})]})})]},a))})]})})})]})]}):M==="grid"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4 lg:gap-6 w-full min-w-0",children:te.map(s=>e.jsxs(L,{className:"hover:shadow-lg transition-shadow w-full min-w-0 box-border",children:[e.jsxs(W,{className:"pb-3 sm:pb-3 p-4 sm:p-5 md:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5 sm:gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[e.jsx(ie,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),e.jsx(je,{className:"text-sm sm:text-base md:text-lg truncate min-w-0",children:s.name})]}),e.jsxs("div",{className:"flex gap-0.5 flex-shrink-0",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>he(s),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:e.jsx(Te,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"})}),e.jsxs(fe,{children:[e.jsx(we,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"sm",className:"h-7 w-7 sm:h-8 sm:w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(Ne,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"})})}),e.jsxs(ge,{className:"w-[95vw] sm:w-full",children:[e.jsxs(ve,{children:[e.jsx(be,{className:"text-base sm:text-lg",children:"Supprimer l'équipement"}),e.jsx(ye,{className:"text-xs sm:text-sm",children:"Êtes-vous sûr de vouloir supprimer cet équipement ? Cette action est irréversible."})]}),e.jsxs(Ce,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(Se,{className:"w-full sm:w-auto",onClick:a=>a.stopPropagation(),children:"Annuler"}),e.jsx(ze,{onClick:()=>ue(s.id),className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})]})]}),e.jsxs(ls,{className:"text-[10px] sm:text-xs md:text-sm mt-1.5 sm:mt-2 break-words line-clamp-2",children:[s.code," - ",x(H,s.type)]})]}),e.jsxs(F,{className:"space-y-1.5 sm:space-y-2 md:space-y-3 p-4 sm:p-5 md:p-6 pt-0 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Zone:"}),e.jsx(A,{variant:"outline",className:"text-[10px] sm:text-xs md:text-sm truncate max-w-[60%] flex-shrink-0 whitespace-nowrap",children:s.zone})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Statut:"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${xe(s.status)}`}),e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm whitespace-nowrap",children:x(G,s.status)})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Criticité:"}),e.jsx("span",{className:`text-[10px] sm:text-xs md:text-sm font-medium ${ee(s.criticite)} truncate whitespace-nowrap flex-shrink-0`,children:x(R,s.criticite)})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Capteurs:"}),e.jsx(A,{variant:"secondary",className:"text-[10px] sm:text-xs md:text-sm flex-shrink-0 whitespace-nowrap",children:s.sensors.length})]})]})]},s.id))}),!Y&&h.length===0&&e.jsxs(L,{className:"p-4 sm:p-6 md:p-12 text-center",children:[e.jsx(ie,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-muted-foreground mx-auto mb-3 sm:mb-4"}),e.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold mb-2",children:v.length===0?"Aucun équipement":"Aucun résultat"}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-muted-foreground mb-3 sm:mb-4",children:v.length===0?"Commencez par ajouter votre premier équipement.":"Aucun équipement ne correspond à vos critères de recherche."}),v.length===0&&e.jsxs(u,{onClick:ae,size:f?"sm":"default",className:"w-full sm:w-auto text-xs sm:text-sm",children:[e.jsx(le,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ajouter un équipement"}),e.jsx("span",{className:"sm:hidden",children:"Ajouter"})]})]})]}):e.jsxs(L,{children:[e.jsx(W,{className:"p-2 sm:p-3 md:p-4",children:e.jsxs(je,{className:"text-xs sm:text-sm md:text-base",children:["Équipements (",h.length,")"]})}),e.jsx(F,{className:"p-0 sm:p-2 md:p-3 w-full min-w-0 overflow-x-auto",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(_e,{className:"w-full min-w-[700px]",children:[e.jsx(ke,{children:e.jsxs(q,{children:[e.jsx(d,{className:"min-w-[100px] text-[10px] sm:text-xs md:text-sm",children:"Nom"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Code"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Type"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Zone"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Fabricant"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Statut"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Criticité"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Capteurs"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Actions"})]})}),e.jsx(De,{children:te.length===0?e.jsx(q,{children:e.jsxs(c,{colSpan:9,className:"text-center py-8",children:[e.jsx(ie,{className:"w-10 h-10 sm:w-12 sm:h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:v.length===0?"Aucun équipement":"Aucun résultat"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-4",children:v.length===0?"Commencez par ajouter votre premier équipement.":"Aucun équipement ne correspond à vos critères de recherche."}),v.length===0&&e.jsxs(u,{onClick:ae,size:f?"sm":"default",className:"w-full sm:w-auto",children:[e.jsx(le,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ajouter un équipement"}),e.jsx("span",{className:"sm:hidden",children:"Ajouter"})]})]})}):te.map(s=>e.jsxs(q,{children:[e.jsx(c,{className:"font-medium text-xs sm:text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground md:hidden",children:s.code}),e.jsx("div",{className:"text-xs text-muted-foreground lg:hidden",children:e.jsx(A,{variant:"outline",className:"text-xs",children:x(H,s.type)})})]})}),e.jsx(c,{className:"text-xs sm:text-sm hidden md:table-cell",children:s.code}),e.jsx(c,{className:"text-xs sm:text-sm hidden lg:table-cell",children:e.jsx(A,{variant:"outline",className:"text-xs sm:text-sm",children:x(H,s.type)})}),e.jsx(c,{className:"text-xs sm:text-sm",children:e.jsx(A,{variant:"outline",className:"text-xs sm:text-sm truncate max-w-[100px]",children:s.zone})}),e.jsx(c,{className:"text-xs sm:text-sm hidden lg:table-cell",children:s.fabricant||"N/A"}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${xe(s.status)}`}),e.jsx("span",{className:"text-xs sm:text-sm",children:x(G,s.status)})]}),e.jsxs("div",{className:"lg:hidden mt-1 space-y-1",children:[e.jsx("div",{className:"text-muted-foreground text-xs",children:"Fabricant:"}),e.jsx("div",{className:"text-xs",children:s.fabricant||"N/A"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Criticité:"}),e.jsx("span",{className:`text-xs font-medium ${ee(s.criticite)}`,children:x(R,s.criticite)}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Capteurs:"}),e.jsx(A,{variant:"secondary",className:"text-xs",children:s.sensors.length})]})]}),e.jsx(c,{className:"text-xs sm:text-sm hidden md:table-cell",children:e.jsx("span",{className:`font-medium ${ee(s.criticite)}`,children:x(R,s.criticite)})}),e.jsx(c,{className:"text-xs sm:text-sm hidden md:table-cell",children:e.jsx(A,{variant:"secondary",className:"text-xs sm:text-sm",children:s.sensors.length})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>he(s),className:"h-8 w-8 p-0",children:e.jsx(Te,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsxs(fe,{children:[e.jsx(we,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive h-8 w-8 p-0",children:e.jsx(Ne,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs(ge,{className:"w-[95vw] sm:w-full",children:[e.jsxs(ve,{children:[e.jsx(be,{className:"text-base sm:text-lg",children:"Supprimer l'équipement"}),e.jsx(ye,{className:"text-xs sm:text-sm",children:"Êtes-vous sûr de vouloir supprimer cet équipement ? Cette action est irréversible."})]}),e.jsxs(Ce,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(Se,{className:"w-full sm:w-auto",onClick:a=>a.stopPropagation(),children:"Annuler"}),e.jsx(ze,{onClick:()=>ue(s.id),className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})]})})]},s.id))})]})})})]}),h.length>0&&V>1&&e.jsx("div",{className:"flex justify-center sm:justify-end items-center mt-4 sm:mt-6 w-full",children:e.jsx(ns,{children:e.jsxs(rs,{className:"flex-wrap gap-1 sm:gap-2",children:[e.jsx(O,{children:e.jsx(cs,{href:"#",onClick:s=>{s.preventDefault(),j>1&&D(j-1)},className:j===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:V},(s,a)=>a+1).filter(s=>f?s===1||s===V||Math.abs(s-j)<=1:!0).map((s,a,p)=>f&&a>0&&s-p[a-1]>1?e.jsxs(is.Fragment,{children:[e.jsx(O,{children:e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."})}),e.jsx(O,{children:e.jsx(Ae,{href:"#",onClick:l=>{l.preventDefault(),D(s)},isActive:j===s,className:"cursor-pointer text-xs sm:text-sm",children:s})},s)]},`ellipsis-${s}`):e.jsx(O,{children:e.jsx(Ae,{href:"#",onClick:l=>{l.preventDefault(),D(s)},isActive:j===s,className:"cursor-pointer text-xs sm:text-sm min-w-[2rem] sm:min-w-[2.5rem]",children:s})},s)),e.jsx(O,{children:e.jsx(ms,{href:"#",onClick:s=>{s.preventDefault(),j<V&&D(j+1)},className:j===V?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),e.jsx(fs,{open:Fe,onOpenChange:ne,importType:"equipment",onImportSuccess:()=>{B(),N({title:"Import réussi",description:"Les équipements ont été importés avec succès."})}})]})};export{Vs as default};
