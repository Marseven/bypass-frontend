import{a6 as Oe,M as Ue,r as m,j as e,f as qe,L as xe,B as h,H as Ge,q as H,D as He,w as Re,x as Ke,y as Je,z as Qe,A as We,K as Xe,v as Ye,S as n,a9 as ee,h as k,R as es,e as V}from"./index-D82yJuq5.js";import{C as D,a as L,b as R,c as oe,d as ss}from"./card-Cy6r01D4.js";import{L as N}from"./label-JgjHxsGm.js";import{A as he,a as ue,T as pe,b as je,c as fe,d as we,e as Ne,f as ge,g as ve,h as be}from"./alert-dialog-CDwkNlRL.js";import{S as b,a as y,b as C,c as S,d as r}from"./select-Bhd_C0Nc.js";import{T as ye,a as Ce,b as Z,c as d,d as Se,e as c}from"./table-CxC05ZdD.js";import{P as ts,a as as,b as O,c as is,d as ze,e as ls}from"./pagination-B-9yyaHV.js";import{B as ns,a as rs,b as Ae,c as cs,d as ms,e as ds}from"./breadcrumb-NyblYhD6.js";import{e as xs}from"./exportData-B2BC3TiR.js";import{U as os,C as hs}from"./CsvImportDialog-BTCMbpd-.js";import{A as us}from"./arrow-left-DjyQEctU.js";import{D as ps}from"./download-BfNLJG8v.js";import{P as se}from"./plus-DEYE8FLH.js";import{L as js,T as fs}from"./table-DedpYVwH.js";import{P as _e}from"./pen-BB8Nwz5u.js";import"./index-BV4TA9fr.js";import"./file-text-CJQecXXr.js";const Is=()=>{const{toast:w}=Oe(),j=Ue(),[g,K]=m.useState([]),[ke,F]=m.useState(!1),[De,te]=m.useState(!1),[z,I]=m.useState(null),[U,Ee]=m.useState(""),[P,Te]=m.useState("all"),[q,Le]=m.useState("all"),[ae,Fe]=m.useState([]),[p,_]=m.useState(1),[v,Ie]=m.useState(3),[$,ie]=m.useState("grid"),[J,G]=m.useState(!0),[le,E]=m.useState(!1),[i,f]=m.useState({}),[t,x]=m.useState({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:"",type_systeme:"process",niveau_sil:"na",fonction_securite:""}),Pe=["conveyor","crusher","pump","fan","separator","loader","truck","drill"],ne=["operational","maintenance","down","standby"],$e=["low","medium","high","critical"],Me=async()=>{try{const s=await V.get("/zones").then(a=>{if(a.data.data.length!==0){const u=a.data.data.map((l,T)=>({id:`${T+1}`,name:l.name,description:`${l.description.toLowerCase()}`,equipmentCount:l.equipements.length}));Fe(u)}}).catch(a=>{console.error("Error fetching data:",a)})}catch(s){console.error("Erreur lors du GET zones :",s)}},M=async()=>{G(!0);try{const s=await V.get("/equipment").then(a=>{if(a.data.data.length!==0){const u=a.data.data.map((l,T)=>{var A;return{id:l.id,name:l.name,code:l.code,type:l.type,zone:((A=l.zone)==null?void 0:A.name)||"N/A",fabricant:l.fabricant,status:l.status,criticite:l.criticite,sensors:l.sensors}});K(u)}G(!1)}).catch(a=>{console.error("Error fetching data:",a),G(!1)})}catch(s){console.error("Erreur lors du GET equipment :",s),G(!1)}};m.useEffect(()=>{Me(),M()},[]);const re=s=>{switch(s){case"operational":return"bg-primary";case"maintenance":return"bg-yellow-500";case"down":return"bg-red-500";case"standby":return"bg-gray-500";default:return"bg-gray-400"}},Q=s=>{switch(s){case"low":return"text-primary";case"medium":return"text-yellow-600";case"high":return"text-orange-600";case"critical":return"text-red-600";default:return"text-gray-600"}},o=g.filter(s=>{const a=s.name.toLowerCase().includes(U.toLowerCase())||s.code.toLowerCase().includes(U.toLowerCase()),u=P==="all"||s.zone===P,l=q==="all"||s.status===q;return console.log(P),a&&u&&l}),B=Math.ceil(o.length/v),W=(p-1)*v,ce=W+v,X=o.slice(W,ce);m.useEffect(()=>{_(1)},[U,P,q,v]),m.useEffect(()=>{const s=Math.ceil(o.length/v);o.length===0?_(1):s>0&&p>s&&_(s)},[o.length,v,p]);const Be=()=>{const s={};return t.name.trim()||(s.name="Le nom est requis"),t.type||(s.type="Le type est requis"),t.zone||(s.zone="La zone est requise"),t.fabricant.trim()||(s.fabricant="Le fabricant est requis"),t.status||(s.status="Le statut est requis"),t.criticite||(s.criticite="La criticité est requise"),f(s),Object.keys(s).length===0},Ve=async s=>{var a,u;if(s.preventDefault(),!!Be()){E(!0);try{if(z){K(g.map(A=>A.id===z.id?{...A,...t,updatedAt:new Date}:A));const l={name:t.name.trim(),type:t.type,zone:t.zone,fabricant:t.fabricant.trim(),status:t.status,criticite:t.criticite,...t.model&&{model:t.model.trim()},type_systeme:t.type_systeme,niveau_sil:t.niveau_sil,...t.fonction_securite&&{fonction_securite:t.fonction_securite.trim()}},T=await V({method:"put",url:`/equipment/${z.id}`,data:l});await M(),w(T?{title:"Équipement modifié",description:"L'équipement a été mis à jour avec succès."}:{title:"Échec de la mise à jour",variant:"destructive"})}else{const l={id:`eq_${Date.now()}`,...t,installationDate:new Date,sensors:[]};K([...g,l]);const T={name:t.name.trim(),type:t.type,zone:t.zone,fabricant:t.fabricant.trim(),status:t.status,criticite:t.criticite,...t.model&&{model:t.model.trim()},type_systeme:t.type_systeme,niveau_sil:t.niveau_sil,...t.fonction_securite&&{fonction_securite:t.fonction_securite.trim()}},A=await V({method:"post",url:"/equipment",data:T});await M(),w(A?{title:"Équipement créé",description:"Le nouvel équipement a été ajouté avec succès."}:{title:"Échec de la création",variant:"destructive"})}F(!1),I(null),f({}),x({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:"",type_systeme:"process",niveau_sil:"na",fonction_securite:""})}catch(l){console.error("Error submitting equipment:",l),w({title:"Erreur",description:((u=(a=l.response)==null?void 0:a.data)==null?void 0:u.message)||(z?"Erreur lors de la modification de l'équipement.":"Erreur lors de la création de l'équipement."),variant:"destructive"})}finally{E(!1)}}},me=s=>{I(s),E(!1),x({name:s.name,type:s.type,zone:s.zone,fabricant:s.fabricant,model:s.model,status:s.status,criticite:s.criticite,type_systeme:s.type_systeme||"process",niveau_sil:s.niveau_sil||"na",fonction_securite:s.fonction_securite||""}),F(!0)},de=async s=>{var a,u;try{await V.delete(`/equipment/${s}`),w({title:"Équipement supprimé",description:"L'équipement a été supprimé avec succès."}),await M()}catch(l){console.error("Error deleting equipment:",l),w({title:"Erreur",description:((u=(a=l.response)==null?void 0:a.data)==null?void 0:u.message)||"Erreur lors de la suppression de l'équipement.",variant:"destructive"})}},Y=()=>{I(null),E(!1),f({}),x({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:""}),F(!0)},Ze=()=>{try{const s=o.map(a=>({Code:a.code,Nom:a.name,Type:a.type,Zone:a.zone,Fabricant:a.fabricant||"N/A",Statut:a.status,Criticité:a.criticite||"N/A","Nombre de capteurs":a.sensors?a.sensors.length:0}));xs(s,`equipements_${new Date().toISOString().split("T")[0]}`),w({title:"Export réussi",description:"Les données ont été exportées avec succès."})}catch(s){console.error("Error exporting data:",s),w({title:"Erreur d'export",description:"Une erreur est survenue lors de l'export des données.",variant:"destructive"})}};return e.jsxs("div",{className:"w-full p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 overflow-x-hidden box-border",children:[e.jsx(D,{className:"bg-card rounded-lg border",children:e.jsx(L,{className:"p-3 sm:p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(qe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-foreground break-words mb-1 truncate",children:"Gestion des Équipements"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground break-words mb-2 line-clamp-1",children:"Gérez vos équipements industriels"}),e.jsx(ns,{children:e.jsxs(rs,{className:"flex-wrap",children:[e.jsx(Ae,{children:e.jsx(cs,{asChild:!0,children:e.jsx(xe,{to:"/",className:"truncate",children:"Tableau de bord"})})}),e.jsx(ms,{}),e.jsx(Ae,{children:e.jsx(ds,{className:"truncate",children:"Équipements"})})]})})]})]}),e.jsx(h,{variant:"outline",size:"icon",className:"flex-shrink-0 rounded-full w-9 h-9 sm:w-10 sm:h-10",asChild:!0,children:e.jsx(xe,{to:"/",children:e.jsx(us,{className:"w-4 h-4"})})})]})})}),e.jsx(D,{children:e.jsx(L,{className:"p-3 sm:p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 items-stretch sm:items-center justify-between w-full min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 flex-1 w-full min-w-0",children:[e.jsx("div",{className:"w-full sm:min-w-[150px] sm:max-w-[300px] flex-1 min-w-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground z-10"}),e.jsx(H,{id:"search",placeholder:"Nom ou code...",value:U,onChange:s=>Ee(s.target.value),className:"pl-8 sm:pl-10 text-xs sm:text-sm md:text-base w-full min-w-0"})]})}),e.jsx("div",{className:"w-full sm:min-w-[140px] sm:max-w-[200px] flex-shrink-0",children:e.jsxs(b,{value:P,onValueChange:Te,children:[e.jsx(y,{className:"w-full text-xs sm:text-sm md:text-base min-w-0",children:e.jsx(C,{placeholder:"Zone"})}),e.jsxs(S,{children:[e.jsx(r,{value:"all",children:"Toutes les zones"}),ae.map(s=>e.jsx(r,{value:s.name,children:s.name},s.id))]})]})}),e.jsx("div",{className:"w-full sm:min-w-[140px] sm:max-w-[200px] flex-shrink-0",children:e.jsxs(b,{value:q,onValueChange:Le,children:[e.jsx(y,{className:"w-full text-xs sm:text-sm md:text-base min-w-0",children:e.jsx(C,{placeholder:"Statut"})}),e.jsxs(S,{children:[e.jsx(r,{value:"all",children:"Tous les statuts"}),ne.map(s=>e.jsx(r,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto flex-shrink-0",children:[e.jsxs(h,{onClick:()=>te(!0),variant:"outline",className:"gap-1.5 sm:gap-2 w-full sm:w-auto flex-shrink-0 text-xs sm:text-sm h-9 sm:h-10",size:j?"sm":"default",children:[e.jsx(os,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Importer"}),e.jsx("span",{className:"sm:hidden truncate",children:"Import"})]}),e.jsxs(h,{onClick:Ze,variant:"outline",className:"gap-1.5 sm:gap-2 w-full sm:w-auto flex-shrink-0 text-xs sm:text-sm h-9 sm:h-10",size:j?"sm":"default",disabled:o.length===0,children:[e.jsx(ps,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Exporter"}),e.jsx("span",{className:"sm:hidden truncate",children:"Export"})]}),e.jsxs(He,{open:ke,onOpenChange:s=>{F(s),s||(I(null),E(!1),f({}),x({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:""}))},children:[e.jsx(Re,{asChild:!0,children:e.jsxs(h,{onClick:Y,className:"gap-1.5 sm:gap-2 w-full sm:w-auto flex-shrink-0 text-xs sm:text-sm h-9 sm:h-10",size:j?"sm":"default",children:[e.jsx(se,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline truncate",children:"Nouvel Équipement"}),e.jsx("span",{className:"sm:hidden truncate",children:"Nouvel"})]})}),e.jsxs(Ke,{className:"max-w-2xl w-[95vw] sm:w-full",children:[e.jsxs(Je,{children:[e.jsx(Qe,{className:"text-base sm:text-lg",children:z?"Modifier l'équipement":"Créer un nouvel équipement"}),e.jsx(We,{className:"text-xs sm:text-sm",children:z?"Modifiez les informations de l'équipement.":"Ajoutez un nouvel équipement au système."})]}),e.jsxs("form",{onSubmit:Ve,className:"space-y-4 max-h-[60vh] sm:max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"name",className:"text-sm",children:["Nom ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(H,{id:"name",value:t.name,onChange:s=>{x({...t,name:s.target.value}),i.name&&f({...i,name:""})},placeholder:"Nom de l'équipement",required:!0,className:`text-sm sm:text-base ${i.name?"border-destructive":""}`}),i.name&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.name})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"type",className:"text-sm",children:["Type ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(b,{value:t.type,onValueChange:s=>{x({...t,type:s}),i.type&&f({...i,type:""})},children:[e.jsx(y,{className:`text-sm sm:text-base ${i.type?"border-destructive":""}`,children:e.jsx(C,{placeholder:"Sélectionner un type"})}),e.jsx(S,{children:Pe.map(s=>e.jsx(r,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),i.type&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.type})]}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"zone",className:"text-sm",children:["Zone ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(b,{value:t.zone,onValueChange:s=>{x({...t,zone:s}),i.zone&&f({...i,zone:""})},children:[e.jsx(y,{className:`text-sm sm:text-base ${i.zone?"border-destructive":""}`,children:e.jsx(C,{placeholder:"Sélectionner une zone"})}),e.jsx(S,{children:ae.map(s=>e.jsx(r,{value:s.name,children:s.name},s.id))})]}),i.zone&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.zone})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"fabricant",className:"text-sm",children:["Fabricant ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(H,{id:"fabricant",value:t.fabricant,onChange:s=>{x({...t,fabricant:s.target.value}),i.fabricant&&f({...i,fabricant:""})},placeholder:"Nom du fabricant",required:!0,className:`text-sm sm:text-base ${i.fabricant?"border-destructive":""}`}),i.fabricant&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.fabricant})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"status",className:"text-sm",children:["Statut ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(b,{value:t.status,onValueChange:s=>{x({...t,status:s}),i.status&&f({...i,status:""})},children:[e.jsx(y,{className:`text-sm sm:text-base ${i.status?"border-destructive":""}`,children:e.jsx(C,{placeholder:"Sélectionner un statut"})}),e.jsx(S,{children:ne.map(s=>e.jsx(r,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),i.status&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.status})]}),e.jsxs("div",{children:[e.jsxs(N,{htmlFor:"criticite",className:"text-sm",children:["Criticité ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(b,{value:t.criticite,onValueChange:s=>{x({...t,criticite:s}),i.criticite&&f({...i,criticite:""})},children:[e.jsx(y,{className:`text-sm sm:text-base ${i.criticite?"border-destructive":""}`,children:e.jsx(C,{placeholder:"Sélectionner la criticité"})}),e.jsx(S,{children:$e.map(s=>e.jsx(r,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),i.criticite&&e.jsx("p",{className:"text-xs text-destructive mt-1",children:i.criticite})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"type_systeme",className:"text-sm",children:"Type système"}),e.jsxs(b,{value:t.type_systeme,onValueChange:s=>x({...t,type_systeme:s}),children:[e.jsx(y,{className:"text-sm sm:text-base",children:e.jsx(C,{placeholder:"Type système"})}),e.jsxs(S,{children:[e.jsx(r,{value:"process",children:"Process"}),e.jsx(r,{value:"securite",children:"Sécurité"}),e.jsx(r,{value:"feu_gaz",children:"Feu & Gaz"})]})]})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"niveau_sil",className:"text-sm",children:"Niveau SIL"}),e.jsxs(b,{value:t.niveau_sil,onValueChange:s=>x({...t,niveau_sil:s}),children:[e.jsx(y,{className:"text-sm sm:text-base",children:e.jsx(C,{placeholder:"Niveau SIL"})}),e.jsxs(S,{children:[e.jsx(r,{value:"na",children:"N/A"}),e.jsx(r,{value:"sil1",children:"SIL 1"}),e.jsx(r,{value:"sil2",children:"SIL 2"}),e.jsx(r,{value:"sil3",children:"SIL 3"})]})]})]})]}),t.niveau_sil!=="na"&&e.jsxs("div",{children:[e.jsx(N,{htmlFor:"fonction_securite",className:"text-sm",children:"Fonction sécurité"}),e.jsx(H,{id:"fonction_securite",value:t.fonction_securite,onChange:s=>x({...t,fonction_securite:s.target.value}),placeholder:"Décrivez la fonction de sécurité",className:"text-sm sm:text-base"})]}),e.jsxs(Xe,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>{F(!1),I(null),E(!1),f({}),x({name:"",type:"",zone:"",fabricant:"",model:"",status:"",criticite:"",type_systeme:"process",niveau_sil:"na",fonction_securite:""})},className:"w-full sm:w-auto",size:j?"sm":"default",children:"Annuler"}),e.jsx(h,{type:"submit",className:"w-full sm:w-auto",size:j?"sm":"default",disabled:le||!t.name.trim()||!t.type||!t.zone||!t.fabricant.trim()||!t.status||!t.criticite,children:le?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),z?"Modification...":"Création..."]}):z?"Modifier":"Créer"})]})]})]})]})]})]})})}),!J&&o.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(N,{htmlFor:"items-per-page",className:"text-xs sm:text-sm whitespace-nowrap",children:"Éléments par page:"}),e.jsxs(b,{value:v.toString(),onValueChange:s=>Ie(Number(s)),children:[e.jsx(y,{className:"w-16 sm:w-20 md:w-24 text-sm",children:e.jsx(C,{})}),e.jsxs(S,{children:[e.jsx(r,{value:"3",children:"3"}),e.jsx(r,{value:"6",children:"6"}),e.jsx(r,{value:"9",children:"9"}),e.jsx(r,{value:"12",children:"12"}),e.jsx(r,{value:"15",children:"15"})]})]})]}),!j&&e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-1",children:[e.jsx(h,{variant:$==="grid"?"default":"ghost",size:"sm",onClick:()=>ie("grid"),className:"h-8",children:e.jsx(js,{className:"h-4 w-4"})}),e.jsx(h,{variant:$==="table"?"default":"ghost",size:"sm",onClick:()=>ie("table"),className:"h-8",children:e.jsx(fs,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground text-left sm:text-right w-full sm:w-auto truncate whitespace-nowrap",children:["Affichage de ",W+1," à ",Math.min(ce,o.length)," sur ",o.length," équipement",o.length>1?"s":""]})]}),J?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4 lg:gap-6 w-full min-w-0 ${$==="table"?"lg:hidden":""}`,children:Array.from({length:v}).map((s,a)=>e.jsxs(D,{className:"flex flex-col h-full w-full min-w-0 box-border",children:[e.jsxs(R,{className:"pb-3 sm:pb-3 p-4 sm:p-5 md:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5 sm:gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[e.jsx(n,{className:"w-4 h-4 sm:w-5 sm:h-5 rounded"}),e.jsx(n,{className:"h-4 sm:h-5 w-24 sm:w-32"})]}),e.jsxs("div",{className:"flex gap-0.5 flex-shrink-0",children:[e.jsx(n,{className:"h-7 w-7 sm:h-8 sm:w-8"}),e.jsx(n,{className:"h-7 w-7 sm:h-8 sm:w-8"})]})]}),e.jsx(n,{className:"h-3 sm:h-4 w-full mt-1.5 sm:mt-2"})]}),e.jsxs(L,{className:"space-y-1.5 sm:space-y-2 md:space-y-3 p-4 sm:p-5 md:p-6 pt-0 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-12"}),e.jsx(n,{className:"h-5 w-16"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-12"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsx(n,{className:"h-2 w-2 rounded-full"}),e.jsx(n,{className:"h-3 w-16"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-16"}),e.jsx(n,{className:"h-3 w-16"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx(n,{className:"h-3 w-16"}),e.jsx(n,{className:"h-5 w-8"})]})]})]},a))}),$==="table"&&e.jsxs(D,{className:"w-full min-w-0 box-border hidden lg:block",children:[e.jsx(R,{className:"p-2 sm:p-3 md:p-4",children:e.jsx(n,{className:"h-5 w-32"})}),e.jsx(L,{className:"p-0 sm:p-2 md:p-3 w-full min-w-0 overflow-hidden",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(ye,{className:"w-full min-w-[700px]",children:[e.jsx(Ce,{children:e.jsxs(Z,{children:[e.jsx(d,{className:"min-w-[100px] text-[10px] sm:text-xs md:text-sm",children:"Nom"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Code"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Type"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Zone"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Fabricant"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Statut"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Criticité"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Capteurs"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Actions"})]})}),e.jsx(Se,{children:Array.from({length:v}).map((s,a)=>e.jsxs(Z,{children:[e.jsx(c,{children:e.jsx(n,{className:"h-4 w-24"})}),e.jsx(c,{className:"hidden md:table-cell",children:e.jsx(n,{className:"h-4 w-20"})}),e.jsx(c,{className:"hidden lg:table-cell",children:e.jsx(n,{className:"h-5 w-16"})}),e.jsx(c,{children:e.jsx(n,{className:"h-5 w-20"})}),e.jsx(c,{className:"hidden lg:table-cell",children:e.jsx(n,{className:"h-4 w-24"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"h-2 w-2 rounded-full"}),e.jsx(n,{className:"h-4 w-16"})]})}),e.jsx(c,{className:"hidden md:table-cell",children:e.jsx(n,{className:"h-4 w-16"})}),e.jsx(c,{className:"hidden md:table-cell",children:e.jsx(n,{className:"h-5 w-8"})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{className:"h-8 w-8"}),e.jsx(n,{className:"h-8 w-8"})]})})]},a))})]})})})]})]}):$==="grid"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4 lg:gap-6 w-full min-w-0",children:X.map(s=>e.jsxs(D,{className:"hover:shadow-lg transition-shadow w-full min-w-0 box-border",children:[e.jsxs(R,{className:"pb-3 sm:pb-3 p-4 sm:p-5 md:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5 sm:gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0",children:[e.jsx(ee,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),e.jsx(oe,{className:"text-sm sm:text-base md:text-lg truncate min-w-0",children:s.name})]}),e.jsxs("div",{className:"flex gap-0.5 flex-shrink-0",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>me(s),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:e.jsx(_e,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"})}),e.jsxs(he,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"h-7 w-7 sm:h-8 sm:w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(pe,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 md:w-4 md:h-4"})})}),e.jsxs(je,{className:"w-[95vw] sm:w-full",children:[e.jsxs(fe,{children:[e.jsx(we,{className:"text-base sm:text-lg",children:"Supprimer l'équipement"}),e.jsx(Ne,{className:"text-xs sm:text-sm",children:"Êtes-vous sûr de vouloir supprimer cet équipement ? Cette action est irréversible."})]}),e.jsxs(ge,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(ve,{className:"w-full sm:w-auto",onClick:a=>a.stopPropagation(),children:"Annuler"}),e.jsx(be,{onClick:()=>de(s.id),className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})]})]}),e.jsxs(ss,{className:"text-[10px] sm:text-xs md:text-sm mt-1.5 sm:mt-2 break-words line-clamp-2",children:[s.code," - ",s.type]})]}),e.jsxs(L,{className:"space-y-1.5 sm:space-y-2 md:space-y-3 p-4 sm:p-5 md:p-6 pt-0 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Zone:"}),e.jsx(k,{variant:"outline",className:"text-[10px] sm:text-xs md:text-sm truncate max-w-[60%] flex-shrink-0 whitespace-nowrap",children:s.zone})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Statut:"}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${re(s.status)}`}),e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm whitespace-nowrap",children:s.status})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Criticité:"}),e.jsx("span",{className:`text-[10px] sm:text-xs md:text-sm font-medium ${Q(s.criticite)} truncate whitespace-nowrap flex-shrink-0`,children:s.criticite})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[e.jsx("span",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground truncate",children:"Capteurs:"}),e.jsx(k,{variant:"secondary",className:"text-[10px] sm:text-xs md:text-sm flex-shrink-0 whitespace-nowrap",children:s.sensors.length})]})]})]},s.id))}),!J&&o.length===0&&e.jsxs(D,{className:"p-4 sm:p-6 md:p-12 text-center",children:[e.jsx(ee,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-muted-foreground mx-auto mb-3 sm:mb-4"}),e.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold mb-2",children:g.length===0?"Aucun équipement":"Aucun résultat"}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base text-muted-foreground mb-3 sm:mb-4",children:g.length===0?"Commencez par ajouter votre premier équipement.":"Aucun équipement ne correspond à vos critères de recherche."}),g.length===0&&e.jsxs(h,{onClick:Y,size:j?"sm":"default",className:"w-full sm:w-auto text-xs sm:text-sm",children:[e.jsx(se,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ajouter un équipement"}),e.jsx("span",{className:"sm:hidden",children:"Ajouter"})]})]})]}):e.jsxs(D,{children:[e.jsx(R,{className:"p-2 sm:p-3 md:p-4",children:e.jsxs(oe,{className:"text-xs sm:text-sm md:text-base",children:["Équipements (",o.length,")"]})}),e.jsx(L,{className:"p-0 sm:p-2 md:p-3 w-full min-w-0 overflow-x-auto",children:e.jsx("div",{className:"w-full min-w-0",children:e.jsxs(ye,{className:"w-full min-w-[700px]",children:[e.jsx(Ce,{children:e.jsxs(Z,{children:[e.jsx(d,{className:"min-w-[100px] text-[10px] sm:text-xs md:text-sm",children:"Nom"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Code"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Type"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Zone"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm hidden lg:table-cell",children:"Fabricant"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Statut"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Criticité"}),e.jsx(d,{className:"min-w-[60px] text-[10px] sm:text-xs md:text-sm hidden md:table-cell",children:"Capteurs"}),e.jsx(d,{className:"min-w-[80px] text-[10px] sm:text-xs md:text-sm",children:"Actions"})]})}),e.jsx(Se,{children:X.length===0?e.jsx(Z,{children:e.jsxs(c,{colSpan:9,className:"text-center py-8",children:[e.jsx(ee,{className:"w-10 h-10 sm:w-12 sm:h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:g.length===0?"Aucun équipement":"Aucun résultat"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-4",children:g.length===0?"Commencez par ajouter votre premier équipement.":"Aucun équipement ne correspond à vos critères de recherche."}),g.length===0&&e.jsxs(h,{onClick:Y,size:j?"sm":"default",className:"w-full sm:w-auto",children:[e.jsx(se,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Ajouter un équipement"}),e.jsx("span",{className:"sm:hidden",children:"Ajouter"})]})]})}):X.map(s=>e.jsxs(Z,{children:[e.jsx(c,{className:"font-medium text-xs sm:text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{children:s.name}),e.jsx("div",{className:"text-xs text-muted-foreground md:hidden",children:s.code}),e.jsx("div",{className:"text-xs text-muted-foreground lg:hidden",children:e.jsx(k,{variant:"outline",className:"text-xs",children:s.type})})]})}),e.jsx(c,{className:"text-xs sm:text-sm hidden md:table-cell",children:s.code}),e.jsx(c,{className:"text-xs sm:text-sm hidden lg:table-cell",children:e.jsx(k,{variant:"outline",className:"text-xs sm:text-sm",children:s.type})}),e.jsx(c,{className:"text-xs sm:text-sm",children:e.jsx(k,{variant:"outline",className:"text-xs sm:text-sm truncate max-w-[100px]",children:s.zone})}),e.jsx(c,{className:"text-xs sm:text-sm hidden lg:table-cell",children:s.fabricant||"N/A"}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${re(s.status)}`}),e.jsx("span",{className:"text-xs sm:text-sm",children:s.status})]}),e.jsxs("div",{className:"lg:hidden mt-1 space-y-1",children:[e.jsx("div",{className:"text-muted-foreground text-xs",children:"Fabricant:"}),e.jsx("div",{className:"text-xs",children:s.fabricant||"N/A"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Criticité:"}),e.jsx("span",{className:`text-xs font-medium ${Q(s.criticite)}`,children:s.criticite}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Capteurs:"}),e.jsx(k,{variant:"secondary",className:"text-xs",children:s.sensors.length})]})]}),e.jsx(c,{className:"text-xs sm:text-sm hidden md:table-cell",children:e.jsx("span",{className:`font-medium ${Q(s.criticite)}`,children:s.criticite})}),e.jsx(c,{className:"text-xs sm:text-sm hidden md:table-cell",children:e.jsx(k,{variant:"secondary",className:"text-xs sm:text-sm",children:s.sensors.length})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>me(s),className:"h-8 w-8 p-0",children:e.jsx(_e,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsxs(he,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive h-8 w-8 p-0",children:e.jsx(pe,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs(je,{className:"w-[95vw] sm:w-full",children:[e.jsxs(fe,{children:[e.jsx(we,{className:"text-base sm:text-lg",children:"Supprimer l'équipement"}),e.jsx(Ne,{className:"text-xs sm:text-sm",children:"Êtes-vous sûr de vouloir supprimer cet équipement ? Cette action est irréversible."})]}),e.jsxs(ge,{className:"flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(ve,{className:"w-full sm:w-auto",onClick:a=>a.stopPropagation(),children:"Annuler"}),e.jsx(be,{onClick:()=>de(s.id),className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})]})})]},s.id))})]})})})]}),o.length>0&&B>1&&e.jsx("div",{className:"flex justify-center sm:justify-end items-center mt-4 sm:mt-6 w-full",children:e.jsx(ts,{children:e.jsxs(as,{className:"flex-wrap gap-1 sm:gap-2",children:[e.jsx(O,{children:e.jsx(is,{href:"#",onClick:s=>{s.preventDefault(),p>1&&_(p-1)},className:p===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:B},(s,a)=>a+1).filter(s=>j?s===1||s===B||Math.abs(s-p)<=1:!0).map((s,a,u)=>j&&a>0&&s-u[a-1]>1?e.jsxs(es.Fragment,{children:[e.jsx(O,{children:e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."})}),e.jsx(O,{children:e.jsx(ze,{href:"#",onClick:l=>{l.preventDefault(),_(s)},isActive:p===s,className:"cursor-pointer text-xs sm:text-sm",children:s})},s)]},`ellipsis-${s}`):e.jsx(O,{children:e.jsx(ze,{href:"#",onClick:l=>{l.preventDefault(),_(s)},isActive:p===s,className:"cursor-pointer text-xs sm:text-sm min-w-[2rem] sm:min-w-[2.5rem]",children:s})},s)),e.jsx(O,{children:e.jsx(ls,{href:"#",onClick:s=>{s.preventDefault(),p<B&&_(p+1)},className:p===B?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),e.jsx(hs,{open:De,onOpenChange:te,importType:"equipment",onImportSuccess:()=>{M(),w({title:"Import réussi",description:"Les équipements ont été importés avec succès."})}})]})};export{Is as default};
