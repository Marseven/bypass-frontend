import{a9 as C,r as m,e as f,j as e,aA as w,L as l,B as d,s as i,aB as _,f as v}from"./index-6KXt54Ri.js";import{C as c,a as o,b as u,c as x,d as h}from"./card-Qkm_iOlj.js";import{L as t}from"./label-BVuo7SAE.js";import{B as S,a as B,b,c as L,d as P,e as q}from"./breadcrumb-CQcBmdJW.js";import{A as z}from"./arrow-left-BsamjYhV.js";import{S as k}from"./save-63VesCay.js";const R=()=>{const{toast:p}=C(),[j,g]=m.useState(!1),[a,r]=m.useState({app_name:"ByPass",app_tagline:"Gestion des bypass",max_pending_requests_per_user:"5",auto_escalation_hours:"24",notification_email:"notifications@bypassguard.com",default_priority:"medium"});m.useEffect(()=>{f.get("/admin/settings").then(s=>{s.data&&r(n=>({...n,...s.data}))}).catch(()=>{})},[]);const N=async()=>{var s,n;g(!0);try{await f.put("/admin/settings",{settings:a}),p({title:"Paramètres sauvegardés",description:"Les paramètres généraux ont été mis à jour avec succès."})}catch(y){p({title:"Erreur",description:((n=(s=y.response)==null?void 0:s.data)==null?void 0:n.message)||"Erreur lors de la sauvegarde.",variant:"destructive"})}finally{g(!1)}};return e.jsxs("div",{className:"w-full p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 overflow-x-hidden box-border",children:[e.jsx(c,{className:"bg-card rounded-lg border",children:e.jsx(o,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground break-words mb-1",children:"Paramètres"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground break-words mb-2",children:"Configurez les paramètres du système"}),e.jsx(S,{children:e.jsxs(B,{children:[e.jsx(b,{children:e.jsx(L,{asChild:!0,children:e.jsx(l,{to:"/",children:"Tableau de bord"})})}),e.jsx(P,{}),e.jsx(b,{children:e.jsx(q,{children:"Paramètres"})})]})})]})]}),e.jsx(d,{variant:"outline",size:"icon",className:"flex-shrink-0 rounded-full w-10 h-10",asChild:!0,children:e.jsx(l,{to:"/",children:e.jsx(z,{className:"w-4 h-4"})})})]})})}),e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsx(x,{children:"Paramètres généraux"}),e.jsx(h,{children:"Configurez les paramètres de base du système"})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"app_name",children:"Nom de l'application"}),e.jsx(i,{id:"app_name",value:a.app_name,onChange:s=>r({...a,app_name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"app_tagline",children:"Sous-titre"}),e.jsx(i,{id:"app_tagline",value:a.app_tagline,onChange:s=>r({...a,app_tagline:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"notification_email",children:"Email de notification"}),e.jsx(i,{id:"notification_email",type:"email",value:a.notification_email,onChange:s=>r({...a,notification_email:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"auto_escalation_hours",children:"Escalade auto (heures)"}),e.jsx(i,{id:"auto_escalation_hours",type:"number",value:a.auto_escalation_hours,onChange:s=>r({...a,auto_escalation_hours:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"default_priority",children:"Priorité par défaut"}),e.jsx(i,{id:"default_priority",value:a.default_priority,onChange:s=>r({...a,default_priority:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"max_pending_requests_per_user",children:"Max demandes en attente / utilisateur"}),e.jsx(i,{id:"max_pending_requests_per_user",type:"number",value:a.max_pending_requests_per_user,onChange:s=>r({...a,max_pending_requests_per_user:s.target.value})})]})]}),e.jsxs(d,{onClick:N,className:"gap-2",disabled:j,children:[e.jsx(k,{className:"w-4 h-4"}),j?"Sauvegarde...":"Sauvegarder les paramètres"]})]})]}),e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Préférences de notifications"]}),e.jsx(h,{children:"Configurez vos canaux de notification par type d'événement"})]}),e.jsxs(o,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choisissez quels canaux de notification activer pour chaque type d'événement."}),e.jsx(d,{asChild:!0,children:e.jsxs(l,{to:"/notification-preferences",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Gérer les préférences"]})})]})]}),e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Rôles et Permissions"]}),e.jsx(h,{children:"Gérez les rôles et leurs permissions associées"})]}),e.jsxs(o,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configurez les rôles utilisateurs et définissez les permissions pour chaque rôle."}),e.jsx(d,{asChild:!0,children:e.jsxs(l,{to:"/roles-permissions",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Gérer les rôles et permissions"]})})]})]})]})};export{R as default};
